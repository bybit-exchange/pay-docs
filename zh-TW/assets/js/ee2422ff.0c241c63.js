"use strict";(self.webpackChunkdocusaurus_docs=self.webpackChunkdocusaurus_docs||[]).push([[8914],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>c});var X=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(e);t&&(X=X.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,X)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,X,a=function(e,t){if(null==e)return{};var n,X,a={},r=Object.keys(e);for(X=0;X<r.length;X++)n=r[X],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(X=0;X<r.length;X++)n=r[X],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=X.createContext({}),p=function(e){var t=X.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=p(e.components);return X.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return X.createElement(X.Fragment,{},t)}},s=X.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),s=p(n),c=a,k=s["".concat(o,".").concat(c)]||s[c]||d[c]||r;return n?X.createElement(k,i(i({ref:t},m),{},{components:n})):X.createElement(k,i({ref:t},m))}));function c(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=s;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<r;p++)i[p]=n[p];return X.createElement.apply(null,i)}return X.createElement.apply(null,n)}s.displayName="MDXCreateElement"},83418:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var X=n(87462),a=(n(67294),n(3905));const r={title:"Payment Notify",sidebar_label:"Payment Notify",sidebar_position:3},i=void 0,l={unversionedId:"scan-payment/payment-notify",id:"scan-payment/payment-notify",title:"Payment Notify",description:"Authentication",source:"@site/docs/scan-payment/payment-notify.mdx",sourceDirName:"scan-payment",slug:"/scan-payment/payment-notify",permalink:"/pay-docs/zh-TW/scan-payment/payment-notify",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Payment Notify",sidebar_label:"Payment Notify",sidebar_position:3},sidebar:"bbyPaySideBar",previous:{title:"Get Payment Result",permalink:"/pay-docs/zh-TW/scan-payment/payment-result"},next:{title:"Payment FxConvert",permalink:"/pay-docs/zh-TW/scan-payment/payment-fx-convert"}},o={},p=[{value:"Authentication",id:"authentication",level:3},{value:"HTTP Request",id:"http-request",level:3},{value:"Header",id:"header",level:3},{value:"Callback Request Parameters",id:"callback-request-parameters",level:3},{value:"Signature Algorithm",id:"signature-algorithm",level:3},{value:"Sign (Bybit Pay Platform)",id:"sign-bybit-pay-platform",level:4},{value:"Verify (Merchant Side)",id:"verify-merchant-side",level:4},{value:"Example: Sign &amp; Verify",id:"example-sign--verify",level:4},{value:"Request Example",id:"request-example",level:3},{value:"Callback Pay Order (Payment Success)",id:"callback-pay-order-payment-success",level:4},{value:"Callback Pay Order (Payment Failed)",id:"callback-pay-order-payment-failed",level:4},{value:"Callback Refund Order",id:"callback-refund-order",level:4},{value:"Callback Broker Prefund Order",id:"callback-broker-prefund-order",level:4}],m={toc:p};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,X.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h3",{id:"authentication"},"Authentication"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Share the IP whitelist with each other;"),(0,a.kt)("li",{parentName:"ul"},"Bybit Pay will encrypt the callbacks via RSA_SHA256. Partners can provide the public key, sign date put in result head. For details, please see ",(0,a.kt)("a",{parentName:"li",href:"#signature-algorithm"},"Signature Algorithm"))),(0,a.kt)("h3",{id:"http-request"},"HTTP Request"),(0,a.kt)("p",null,"Method: ",(0,a.kt)("inlineCode",{parentName:"p"},"POST"),(0,a.kt)("br",null),"\nURL: provide the callback url in the ",(0,a.kt)("a",{parentName:"p",href:"create-payment"},"Create Payment")," request parameter ",(0,a.kt)("inlineCode",{parentName:"p"},"webhookUrl")),(0,a.kt)("h3",{id:"header"},"Header"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Parameter"),(0,a.kt)("th",{parentName:"tr",align:null},"Comments"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Content-Type"),(0,a.kt)("td",{parentName:"tr",align:null},"application/json")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Version"),(0,a.kt)("td",{parentName:"tr",align:null},'API version (e.g., "5.00", "5.01"). Matches the version used when creating the order.')),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"timestamp"),(0,a.kt)("td",{parentName:"tr",align:null},"Current timestamp (Unix seconds, 10 digits)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"publicKey"),(0,a.kt)("td",{parentName:"tr",align:null},"Merchant's RSA public key (optional, used for webhook signature verification)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"signature"),(0,a.kt)("td",{parentName:"tr",align:null},"Generated by ",(0,a.kt)("a",{parentName:"td",href:"#signature-algorithm"},"Signature Algorithm"))))),(0,a.kt)("admonition",{title:"Timestamp Format",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"All timestamp fields in webhook callbacks use ",(0,a.kt)("strong",{parentName:"p"},"Unix timestamp in seconds")," (10 digits):"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"Header ",(0,a.kt)("inlineCode",{parentName:"li"},"timestamp"),": ",(0,a.kt)("inlineCode",{parentName:"li"},"1736236800")," (seconds since epoch)"),(0,a.kt)("li",{parentName:"ul"},"Body fields (",(0,a.kt)("inlineCode",{parentName:"li"},"createTime"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"paymentTime"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"finishTime"),"): ",(0,a.kt)("inlineCode",{parentName:"li"},"1736233200")," (seconds since epoch)")),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"Important"),": When verifying the signature, use the timestamp values exactly as they appear in the JSON body. Do NOT multiply by 1000.")),(0,a.kt)("h3",{id:"callback-request-parameters"},"Callback Request Parameters"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Parameter"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Comments"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"paymentType"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:null},"Payment type  ",(0,a.kt)("li",null,(0,a.kt)("inlineCode",{parentName:"td"},"E_COMMERCE"),": Bybit QR Pay for e-commerce"),(0,a.kt)("li",null,(0,a.kt)("inlineCode",{parentName:"td"},"E_COMMERCE_REFUND"),": Bybit QR Pay refund for e-commerce"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"}),(0,a.kt)("td",{parentName:"tr",align:"left"},"<",(0,a.kt)("a",{parentName:"td",href:"data-model/pay-order"},"PayOrderType"),">"),(0,a.kt)("td",{parentName:"tr",align:null},'Returned when "paymentType"=',(0,a.kt)("inlineCode",{parentName:"td"},"E_COMMERCE"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"}),(0,a.kt)("td",{parentName:"tr",align:"left"},"<",(0,a.kt)("a",{parentName:"td",href:"data-model/refund-order"},"RefundOrderType"),">"),(0,a.kt)("td",{parentName:"tr",align:null},'Returned when "paymentType"=',(0,a.kt)("inlineCode",{parentName:"td"},"E_COMMERCE_REFUND"))))),(0,a.kt)("h3",{id:"signature-algorithm"},"Signature Algorithm"),(0,a.kt)("admonition",{title:"Signature Method",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Bybit Pay webhook uses ",(0,a.kt)("strong",{parentName:"p"},"JSON body")," for signature calculation. The signature string is constructed by concatenating:"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("inlineCode",{parentName:"strong"},"timestamp")," + ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON_body"))),(0,a.kt)("p",{parentName:"admonition"},"Where:"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"timestamp"),": Current Unix timestamp in seconds (10 digits)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JSON_body"),": Complete JSON request body as a string (no sorting, no conversion)")),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"Important"),": Do NOT convert the JSON to URL-encoded format. Use the raw JSON string directly.")),(0,a.kt)("h4",{id:"sign-bybit-pay-platform"},"Sign (Bybit Pay Platform)"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Generate current timestamp (Unix seconds): ",(0,a.kt)("inlineCode",{parentName:"li"},"timestamp = 1736236800")),(0,a.kt)("li",{parentName:"ol"},"Marshal the callback data to JSON string (preserve field order as-is)"),(0,a.kt)("li",{parentName:"ol"},"Concatenate: ",(0,a.kt)("inlineCode",{parentName:"li"},"signContent = timestamp + jsonString"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},'1736236800{"paymentType":"E_COMMERCE","merchantId":"305142568",...}\n'))),(0,a.kt)("li",{parentName:"ol"},"Encrypt with SHA256 and sign with RSA (PKCS1v15, 1024-bit key)"),(0,a.kt)("li",{parentName:"ol"},"Encode the signature bytes in base64")),(0,a.kt)("h4",{id:"verify-merchant-side"},"Verify (Merchant Side)"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Get ",(0,a.kt)("inlineCode",{parentName:"li"},"timestamp")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"signature")," from request headers"),(0,a.kt)("li",{parentName:"ol"},"Read the raw request body as string (do not parse yet)"),(0,a.kt)("li",{parentName:"ol"},"Concatenate: ",(0,a.kt)("inlineCode",{parentName:"li"},"signContent = timestamp + requestBody"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},'1736236800{"paymentType":"E_COMMERCE","merchantId":"305142568",...}\n'))),(0,a.kt)("li",{parentName:"ol"},"Decode the signature from base64"),(0,a.kt)("li",{parentName:"ol"},"Verify the signature using SHA256 and Bybit's RSA public key")),(0,a.kt)("hr",null),(0,a.kt)("h4",{id:"example-sign--verify"},"Example: Sign & Verify"),(0,a.kt)("p",null,"For example, we sign the following data. The timestamp is ",(0,a.kt)("inlineCode",{parentName:"p"},"1736236800"),", the RSA key is"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"-----The following key pairs are for testing only-----\n-----BEGIN RSA PUBLIC KEY-----\nMIGJAoGBAOFSnhqtu40TOtok+yXeB+O76PXb/VAJU4Yih6hViOdSGd7imWmCSZyP\npsl3TmXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXf+AxlKYMj8OQ\nAgDPmZG1a5ydFrje4PLytC7sUw3GP4TTk8xg6iMHmYPdRDv7AEWdAgMBAAE=\n-----END RSA PUBLIC KEY-----\n\n-----BEGIN RSA PRIVATE KEY-----\nMIICXwIBAAKBgQDhUp4arbuNEzraJPsl3gfju+j12/1QCVOGIoeoVYjnUhne4plp\ngkmcj6bJd05i4VKAfq082AXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nDI/DkAIAz5mRtWucnRa43XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nAoGBAIqpeCi83516xw32XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\naxzIwyfWTTATWbiCS9sqXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n6gOQYu8kzRqCzqvyMNdAHXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\ne/Gxi7qhuIKz0mvfA/yieXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n3IBIdV/CbwJBAOQcsOPf+XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n/5V9zdim+hPq+9cvsqO7dXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nMY4uV8noiqDRf/pvAkyMMXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n15eWR4jEoXMIFkd7Onc6tXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nBnj6KW1fk+UM29dUDjmTqXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nIavMyjrhDKyBGZ0mI6eoREaC4bxl31RRkYtg9mNeU3TxsBM=\n-----END RSA PRIVATE KEY-----\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"JSON Payload Example:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "paymentType": "E_COMMERCE",\n    "merchantId": "305142568",\n    "clientId": "client_001",\n    "merchantTradeNo": "af8c2d1-5b3e-4a9f-b6c7-8d2e1f3a4b5c",\n    "payId": "01JY2KM5QNPXR8S4HTJZT9BC12",\n    "status": "PAY_SUCCESS",\n    "amount": "100",\n    "currency": "USDT",\n    "currencyType": "crypto",\n    "createTime": 1736233200,\n    "paymentTime": 1736233260,\n    "finishTime": 1736233260\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Signature Calculation Steps:")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Generate timestamp: ",(0,a.kt)("inlineCode",{parentName:"li"},"1736236800")),(0,a.kt)("li",{parentName:"ol"},"Convert JSON to string (minified, no extra spaces):",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},'{"paymentType":"E_COMMERCE","merchantId":"305142568","clientId":"client_001","merchantTradeNo":"af8c2d1-5b3e-4a9f-b6c7-8d2e1f3a4b5c","payId":"01JY2KM5QNPXR8S4HTJZT9BC12","status":"PAY_SUCCESS","amount":"100","currency":"USDT","currencyType":"crypto","createTime":1736233200,"paymentTime":1736233260,"finishTime":1736233260}\n'))),(0,a.kt)("li",{parentName:"ol"},"Concatenate: ",(0,a.kt)("inlineCode",{parentName:"li"},"signContent = timestamp + jsonString"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},'1736236800{"paymentType":"E_COMMERCE","merchantId":"305142568",...}\n'))),(0,a.kt)("li",{parentName:"ol"},"Sign with SHA256 + RSA private key"),(0,a.kt)("li",{parentName:"ol"},"Encode to base64:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"NgDZLZCVBdma904hzZXmU+fQ7dr7z7muZkuwAbDnibLXXXXXXXXXXXXgmzad58LfRtLXGlkNPXXXXXXXXXXX9jNYd6gxp7j0Mlh0vQlQCIb2283DQ3wbZDphilvXXXXXXXXXXXXX2IIBelYBBw39U=\n")))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Verification Steps (Merchant Side):")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Extract ",(0,a.kt)("inlineCode",{parentName:"li"},"timestamp")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"signature")," from request headers"),(0,a.kt)("li",{parentName:"ol"},"Read raw request body (string, do not parse)"),(0,a.kt)("li",{parentName:"ol"},"Concatenate: ",(0,a.kt)("inlineCode",{parentName:"li"},"signContent = timestamp + requestBody")),(0,a.kt)("li",{parentName:"ol"},"Decode signature from base64"),(0,a.kt)("li",{parentName:"ol"},"Verify using SHA256 + RSA public key")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Test Keys:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"-----The following key pairs are for testing only-----\n-----BEGIN RSA PUBLIC KEY-----\nMIGJAoGBAOFSnhqtu40TOtok+yXeB+O76PXb/VAJU4Yih6hViOdSGd7imWmCSZyP\npsl3TmXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXf+AxlKYMj8OQ\nAgDPmZG1a5ydFrje4PLytC7sUw3GP4TTk8xg6iMHmYPdRDv7AEWdAgMBAAE=\n-----END RSA PUBLIC KEY-----\n\n-----BEGIN RSA PRIVATE KEY-----\nMIICXwIBAAKBgQDhUp4arbuNEzraJPsl3gfju+j12/1QCVOGIoeoVYjnUhne4plp\ngkmcj6bJd05i4VKAfq082AXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nDI/DkAIAz5mRtWucnRa43XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nAoGBAIqpeCi83516xw32XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\naxzIwyfWTTATWbiCS9sqXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n6gOQYu8kzRqCzqvyMNdAHXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\ne/Gxi7qhuIKz0mvfA/yieXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n3IBIdV/CbwJBAOQcsOPf+XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n/5V9zdim+hPq+9cvsqO7dXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nMY4uV8noiqDRf/pvAkyMMXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n15eWR4jEoXMIFkd7Onc6tXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nBnj6KW1fk+UM29dUDjmTqXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nIavMyjrhDKyBGZ0mI6eoREaC4bxl31RRkYtg9mNeU3TxsBM=\n-----END RSA PRIVATE KEY-----\n")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"request-example"},"Request Example"),(0,a.kt)("h4",{id:"callback-pay-order-payment-success"},"Callback Pay Order (Payment Success)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-http"},'POST ${webhook url} HTTP/1.1\nHost: www.merchant.com\ntimestamp: 1736233260\nsignature: NgDZLZCVBdma904hzZXmU+fQ7dr7z7muZkuwAbDnibLXXXXXXXXXXXXgmzad58Lf...\nContent-Type: application/json\n\n{\n    "paymentType": "E_COMMERCE",\n    "merchantId": "305142568",\n    "clientId": "client_001",\n    "merchantTradeNo": "af8c2d1-5b3e-4a9f-b6c7-8d2e1f3a4b5c",\n    "payId": "01JY2KM5QNPXR8S4HTJZT9BC12",\n    "status": "PAY_SUCCESS",\n    "amount": "100",\n    "currency": "USDT",\n    "currencyType": "crypto",\n    "createTime": 1736233200,\n    "paymentTime": 1736233260,\n    "finishTime": 1736233260,\n    "customer": {\n        "uid": "104326789",\n        "externalUserId": "user123@merchant.com",\n        "userName": "John Doe",\n        "registerTime": 1704067200,\n        "kycCountry": "USA"\n    }\n}\n')),(0,a.kt)("h4",{id:"callback-pay-order-payment-failed"},"Callback Pay Order (Payment Failed)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-http"},'POST ${webhook url} HTTP/1.1\nHost: www.merchant.com\ntimestamp: 1736233500\nsignature: NgDZLZCVBdma904hzZXmU+fQ7dr7z7muZkuwAbDnibLXXXXXXXXXXXXgmzad58Lf...\nContent-Type: application/json\n\n{\n    "paymentType": "E_COMMERCE",\n    "merchantId": "305142568",\n    "clientId": "client_001",\n    "merchantTradeNo": "bf9d3e2-6c4f-5b0g-c8d9-9e3f2g4b6d7e",\n    "payId": "01JY2KM5QNPXR8S4HTJZT9BC13",\n    "status": "PAY_FAILED",\n    "amount": "50",\n    "currency": "USDT",\n    "currencyType": "crypto",\n    "createTime": 1736233300,\n    "paymentTime": 0,\n    "finishTime": 1736233500,\n    "customer": {\n        "uid": "104326790",\n        "externalUserId": "user456@merchant.com",\n        "userName": "Jane Smith",\n        "registerTime": 1709251200,\n        "kycCountry": "GBR"\n    }\n}\n')),(0,a.kt)("h4",{id:"callback-refund-order"},"Callback Refund Order"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-http"},'POST ${webhook url} HTTP/1.1\nHost: www.merchant.com\ntimestamp: 1736234000\nsignature: NgDZLZCVBdma904hzZXmU+fQ7dr7z7muZkuwAbDnibLXXXXXXXXXXXXgmzad58Lf...\nContent-Type: application/json\n\n{\n    "paymentType": "E_COMMERCE_REFUND",\n    "refundId": "RF01JY2KM5QNPXR8S4HTJZT9BC14",\n    "refundType": "MERCHNT_SELF_REFUND",\n    "merchantTradeNo": "af8c2d1-5b3e-4a9f-b6c7-8d2e1f3a4b5c",\n    "merchantRefundNo": "RF-2026-0001",\n    "payId": "01JY2KM5QNPXR8S4HTJZT9BC12",\n    "refundStatus": "REFUND_SUCCESS",\n    "refundCurrency": "USDT",\n    "amount": "50",\n    "createTime": 1736234000\n}\n')),(0,a.kt)("h4",{id:"callback-broker-prefund-order"},"Callback Broker Prefund Order"),(0,a.kt)("admonition",{title:"Broker Prefund Feature",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"This webhook is triggered for broker prefund orders (payment type: ",(0,a.kt)("inlineCode",{parentName:"p"},"BROKER_PREFUND"),"). It notifies merchants about cryptocurrency exchange/conversion order status updates."),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"Use Case"),": When a merchant processes a fiat-to-crypto or crypto-to-fiat conversion through Bybit's broker service.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-http"},'POST ${webhook url} HTTP/1.1\nHost: www.merchant.com\nVersion: 5.01\ntimestamp: 1736235000\nsignature: NgDZLZCVBdma904hzZXmU+fQ7dr7z7muZkuwAbDnibLXXXXXXXXXXXXgmzad58Lf...\nContent-Type: application/json\n\n{\n    "tradeNo": "DL202601280001",\n    "status": "completed",\n    "quoteTxId": "QUOTE-20260128-001",\n    "exchangeRate": "1.0025",\n    "fromCoin": "USD",\n    "fromCoinType": "fiat",\n    "toCoin": "USDT",\n    "toCoinType": "crypto",\n    "fromAmount": "1000.00",\n    "toAmount": "998.75",\n    "createdAt": "1736235000000",\n    "subUserid": "12345678"\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Broker Prefund Order Fields:")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Field"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"tradeNo"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Broker deal order ID")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"status"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Order status: ",(0,a.kt)("inlineCode",{parentName:"td"},"pending"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"completed"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"failed"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"cancelled"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"quoteTxId"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Quote transaction ID (price lock ID)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"exchangeRate"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Exchange rate applied (unit price)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"fromCoin"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Source currency/coin")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"fromCoinType"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Source currency type: ",(0,a.kt)("inlineCode",{parentName:"td"},"fiat")," or ",(0,a.kt)("inlineCode",{parentName:"td"},"crypto"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"toCoin"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Destination currency/coin")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"toCoinType"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Destination currency type: ",(0,a.kt)("inlineCode",{parentName:"td"},"fiat")," or ",(0,a.kt)("inlineCode",{parentName:"td"},"crypto"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"fromAmount"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Source amount (how much user pays)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"toAmount"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Destination amount (how much user receives)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"createdAt"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Order creation timestamp in ",(0,a.kt)("strong",{parentName:"td"},"milliseconds")," (13 digits)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"subUserid"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Sub-user ID (slave UID)")))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Status Values:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"pending"),": Order is being processed"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"completed"),": Order completed successfully"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"failed"),": Order failed"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"cancelled"),": Order was cancelled")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Note"),": Unlike payment orders, the ",(0,a.kt)("inlineCode",{parentName:"p"},"createdAt")," field in broker prefund orders uses ",(0,a.kt)("strong",{parentName:"p"},"milliseconds")," (13 digits), not seconds."))}d.isMDXComponent=!0}}]);