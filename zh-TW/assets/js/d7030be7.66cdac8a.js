"use strict";(self.webpackChunkdocusaurus_docs=self.webpackChunkdocusaurus_docs||[]).push([[5029],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>m});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),o=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):d(d({},n),e)),t},u=function(e){var n=o(e.components);return r.createElement(s.Provider,{value:n},e.children)},i={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=o(t),m=a,f=c["".concat(s,".").concat(m)]||c[m]||i[m]||l;return t?r.createElement(f,d(d({ref:n},u),{},{components:t})):r.createElement(f,d({ref:n},u))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,d=new Array(l);d[0]=c;var p={};for(var s in n)hasOwnProperty.call(n,s)&&(p[s]=n[s]);p.originalType=e,p.mdxType="string"==typeof e?e:a,d[1]=p;for(var o=2;o<l;o++)d[o]=t[o];return r.createElement.apply(null,d)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},50187:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>d,default:()=>i,frontMatter:()=>l,metadata:()=>p,toc:()=>o});var r=t(87462),a=(t(67294),t(3905));const l={title:"Order Refund & Batch Processing",sidebar_label:"Order Refund & Batch Processing"},d=void 0,p={unversionedId:"scan-payment/refund",id:"scan-payment/refund",title:"Order Refund & Batch Processing",description:"HTTP Request",source:"@site/docs/scan-payment/refund.mdx",sourceDirName:"scan-payment",slug:"/scan-payment/refund",permalink:"/pay-docs/zh-TW/scan-payment/refund",draft:!1,tags:[],version:"current",frontMatter:{title:"Order Refund & Batch Processing",sidebar_label:"Order Refund & Batch Processing"},sidebar:"bbyPaySideBar",previous:{title:"Payment FxConvert",permalink:"/pay-docs/zh-TW/scan-payment/payment-fx-convert"},next:{title:"Payout",permalink:"/pay-docs/zh-TW/scan-payment/payout"}},s={},o=[{value:"HTTP Request",id:"http-request",level:3},{value:"Request Parameters",id:"request-parameters",level:3},{value:"Response Parameters",id:"response-parameters",level:3},{value:"Request Example",id:"request-example",level:3},{value:"Single Full Refund (by payId - Recommended)",id:"single-full-refund-by-payid---recommended",level:4},{value:"Single Partial Refund (by merchantTradeNo)",id:"single-partial-refund-by-merchanttradeno",level:4},{value:"Batch Refund (Multiple Orders)",id:"batch-refund-multiple-orders",level:4},{value:"Response Example",id:"response-example",level:3},{value:"Single Refund Success Response",id:"single-refund-success-response",level:4},{value:"Batch Refund Response",id:"batch-refund-response",level:4}],u={toc:o};function i(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h3",{id:"http-request"},"HTTP Request"),(0,a.kt)("p",null,"POST ",(0,a.kt)("inlineCode",{parentName:"p"},"/v5/bybitpay/refund")),(0,a.kt)("h3",{id:"request-parameters"},"Request Parameters"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Parameter"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Required"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Comments"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"merchantId"),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("strong",{parentName:"td"},"true")),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:null},"Merchant UID")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"clientId"),(0,a.kt)("td",{parentName:"tr",align:"left"},"false"),(0,a.kt)("td",{parentName:"tr",align:"left"},"string"),(0,a.kt)("td",{parentName:"tr",align:null},"Merchant client ID")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"list"),(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("strong",{parentName:"td"},"true")),(0,a.kt)("td",{parentName:"tr",align:"left"},"array","<",(0,a.kt)("a",{parentName:"td",href:"data-model/refund-order-item"},"RefundOrderItemType"),">"),(0,a.kt)("td",{parentName:"tr",align:null},"Refund order request item")))),(0,a.kt)("h3",{id:"response-parameters"},"Response Parameters"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Parameter"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Comments"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"refundOrders"),(0,a.kt)("td",{parentName:"tr",align:"left"},"array","<",(0,a.kt)("a",{parentName:"td",href:"data-model/refund-order"},"RefundOrderType"),">"),(0,a.kt)("td",{parentName:"tr",align:null},"Refund order details")))),(0,a.kt)("h3",{id:"request-example"},"Request Example"),(0,a.kt)("h4",{id:"single-full-refund-by-payid---recommended"},"Single Full Refund (by payId - Recommended)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-http"},'POST /v5/bybitpay/refund HTTP/1.1\nHost: api.bybit.com\nX-BAPI-SIGN: XXXXX\nX-BAPI-API-KEY: xxxxxxxxxxxxxxxxxx\nX-BAPI-TIMESTAMP: 1736233200000\nX-BAPI-RECV-WINDOW: 5000\nContent-Type: application/json\n\n{\n    "merchantId": "305142568",\n    "clientId": "client_001",\n    "list": [\n        {\n            "refundType": "MERCHNT_SELF_REFUND",\n            "payId": "01JY2KM5QNPXR8S4HTJZT9BC12",\n            "merchantRefundNo": "RF-2026-0001",\n            "refundAmount": "100",\n            "env": {\n                "terminalType": "WEB",\n                "device": "Mozilla/5.0 compatible browser",\n                "browserVersion": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36",\n                "ip": "203.0.113.50"\n            },\n            "riskInfo": {\n                "terminalType": "WEB"\n            },\n            "customer": {\n                "externalUserId": "user123@merchant.com",\n                "userName": "John Doe",\n                "registerTime": 1704067200,\n                "kycCountry": "USA"\n            }\n        }\n    ]\n}\n')),(0,a.kt)("h4",{id:"single-partial-refund-by-merchanttradeno"},"Single Partial Refund (by merchantTradeNo)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-http"},'POST /v5/bybitpay/refund HTTP/1.1\nHost: api.bybit.com\nX-BAPI-SIGN: XXXXX\nX-BAPI-API-KEY: xxxxxxxxxxxxxxxxxx\nX-BAPI-TIMESTAMP: 1736233200000\nX-BAPI-RECV-WINDOW: 5000\nContent-Type: application/json\n\n{\n    "merchantId": "305142568",\n    "list": [\n        {\n            "refundType": "MERCHNT_SELF_REFUND",\n            "merchantTradeNo": "af8c2d1-5b3e-4a9f-b6c7-8d2e1f3a4b5c",\n            "merchantRefundNo": "RF-2026-0002",\n            "refundAmount": "50",\n            "env": {\n                "terminalType": "APP",\n                "device": "iPhone15,2",\n                "browserVersion": "iOS 18.0",\n                "ip": "198.51.100.25"\n            }\n        }\n    ]\n}\n')),(0,a.kt)("h4",{id:"batch-refund-multiple-orders"},"Batch Refund (Multiple Orders)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-http"},'POST /v5/bybitpay/refund HTTP/1.1\nHost: api.bybit.com\nX-BAPI-SIGN: XXXXX\nX-BAPI-API-KEY: xxxxxxxxxxxxxxxxxx\nX-BAPI-TIMESTAMP: 1736233200000\nX-BAPI-RECV-WINDOW: 5000\nContent-Type: application/json\n\n{\n    "merchantId": "305142568",\n    "clientId": "client_001",\n    "list": [\n        {\n            "refundType": "MERCHNT_SELF_REFUND",\n            "payId": "01JY2KM5QNPXR8S4HTJZT9BC12",\n            "merchantRefundNo": "RF-BATCH-001",\n            "refundAmount": "100",\n            "env": {\n                "terminalType": "WEB",\n                "device": "batch-processor",\n                "browserVersion": "Server/1.0",\n                "ip": "10.0.1.100"\n            }\n        },\n        {\n            "refundType": "MERCHNT_SELF_REFUND",\n            "payId": "01JY2KM5QNPXR8S4HTJZT9BC13",\n            "merchantRefundNo": "RF-BATCH-002",\n            "refundAmount": "50.50",\n            "env": {\n                "terminalType": "WEB",\n                "device": "batch-processor",\n                "browserVersion": "Server/1.0",\n                "ip": "10.0.1.100"\n            }\n        }\n    ]\n}\n')),(0,a.kt)("h3",{id:"response-example"},"Response Example"),(0,a.kt)("h4",{id:"single-refund-success-response"},"Single Refund Success Response"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "retCode": 100000,\n    "retMsg": "success",\n    "result": {\n        "refundOrders": [\n            {\n                "refundId": "RF01JY2KM5QNPXR8S4HTJZT9BC14",\n                "refundType": "MERCHNT_SELF_REFUND",\n                "merchantTradeNo": "af8c2d1-5b3e-4a9f-b6c7-8d2e1f3a4b5c",\n                "merchantRefundNo": "RF-2026-0001",\n                "payId": "01JY2KM5QNPXR8S4HTJZT9BC12",\n                "refundStatus": "REFUND_SUCCESS",\n                "refundCurrency": "USDT",\n                "amount": "100",\n                "createTime": 1736234000\n            }\n        ]\n    }\n}\n')),(0,a.kt)("h4",{id:"batch-refund-response"},"Batch Refund Response"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "retCode": 100000,\n    "retMsg": "success",\n    "result": {\n        "refundOrders": [\n            {\n                "refundId": "RF01JY2KM5QNPXR8S4HTJZT9BC14",\n                "refundType": "MERCHNT_SELF_REFUND",\n                "merchantTradeNo": "af8c2d1-5b3e-4a9f-b6c7-8d2e1f3a4b5c",\n                "merchantRefundNo": "RF-BATCH-001",\n                "payId": "01JY2KM5QNPXR8S4HTJZT9BC12",\n                "refundStatus": "REFUND_SUCCESS",\n                "refundCurrency": "USDT",\n                "amount": "100",\n                "createTime": 1736234000\n            },\n            {\n                "refundId": "RF01JY2KM5QNPXR8S4HTJZT9BC15",\n                "refundType": "MERCHNT_SELF_REFUND",\n                "merchantTradeNo": "bf9d3e2-6c4f-5b0g-c8d9-9e3f2g4b6d7e",\n                "merchantRefundNo": "RF-BATCH-002",\n                "payId": "01JY2KM5QNPXR8S4HTJZT9BC13",\n                "refundStatus": "REFUND_SUCCESS",\n                "refundCurrency": "USDT",\n                "amount": "50.50",\n                "createTime": 1736234000\n            }\n        ]\n    }\n}\n')))}i.isMDXComponent=!0}}]);